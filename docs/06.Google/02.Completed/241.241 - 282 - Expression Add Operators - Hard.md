---
title: 241 -  282 - Expression Add Operators
date: 2021-09-12 21:22:24
permalink: /pages/1b033f/
categories:
  - 
  - p5
tags:
  - dfs
---
## Description
Given a string num that contains only digits and an integer target, return all possibilities to add the binary operators '+', '-', or '*' between the digits of num so that the resultant expression evaluates to the target value.

## Examples
```
Input: num = "123", target = 6
Output: ["1*2*3","1+2+3"]

Input: num = "232", target = 8
Output: ["2*3+2","2+3*2"]

Input: num = "105", target = 5
Output: ["1*0+5","10-5"]

Input: num = "00", target = 0
Output: ["0*0","0+0","0-0"]

Input: num = "3456237490", target = 9191
Output: []
```

## Solution: DFS
```
        1                     10                105
    +0  -0  *0          +5  -5  *5                  
+2 -2 *2
```
```python
class Solution:
    def addOperators(self, num: str, target: int):
        res = []
        self.dfs(num, target, [], res, 0, 0, 0)
        return res  
        
    def dfs(self, num, target, path, res, evalt, prev, idx):
        if idx == len(num):
            if evalt == target:
                res.append("".join(path))
        
        for i in range(idx, len(num)):
            cur_str = num[idx: i+1]
            if cur_str[0] == "0" and i > idx:
                break
            # 光是0不能break，比如 1*0+5
            cur = int(cur_str)
            if idx == 0: #这个condition不要忘了
                self.dfs(num, target, [cur_str], res, evalt + cur, cur, i + 1)
            else:
                self.dfs(num, target, path + ["+" + cur_str], 
                         res, evalt + cur, cur, i+1)
                self.dfs(num, target, path + ["-" + cur_str], 
                         res, evalt - cur, -cur, i+1)
                self.dfs(num, target, path + ["*" + cur_str], 
                         res, evalt -prev + prev*cur, prev*cur, i+1)
```

