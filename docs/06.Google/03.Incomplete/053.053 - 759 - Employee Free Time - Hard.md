---
title: 053 - 759 - Employee Free Time - Hard
date: 2022-07-27 09:57:26
permalink: /pages/23d503/
categories:
  - Google
  - Incomplete
tags:
  - line sweep
---
tags: [Array, Sorting, Heap (Priority Queue)]

[LC Link](https://leetcode.cn/problems/employee-free-time/)

![](https://raw.githubusercontent.com/emmableu/image/master/202208142304347.png)
![](https://raw.githubusercontent.com/emmableu/image/master/202209061518033.png)

Key points:

1.  本题类似于:
	- [076 - 56 - Merge Intervals](/pages/leetcode56)
	- 找到interval 的union，然后找到剩下的interval，就是员工的空闲时间。
2.  it doesn't matter which employee an interval belongs to, so just flatten
3.  can build result array while merging, don't have to do afterward (and don't need full merged arr)


## O (n log n), not optimal

```python
class Solution:
	def employeeFreeTime(self, schedule: '[[Interval]]') -> '[Interval]':
		flat = sorted([intv for sch in schedule for intv in sch], key = lambda x: x.start)
		union, prev = [flat[0]], flat[0]
		for sch in flat[1:]:
			if sch.start > prev.end:
				union.append(sch)
				prev = sch
			else:
				prev.end = max(prev.end, sch.end)
				union[-1].end = prev.end

		if len(union) == 1:
			return []
		res = [Interval(union[0].end, 0)]
		for ele in union[1:]:
			res[-1].end = ele.start
			res.append(Interval(ele.end, 0))
		res.pop()
		return res
```


## O (n log k),  optimal

%%todo%%

```python

```