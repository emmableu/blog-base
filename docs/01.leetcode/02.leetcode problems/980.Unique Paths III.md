---
title: Unique Paths III
date: 2022-09-15 15:54:06
permalink: /pages/5c6390/
categories:
  - leetcode
  - leetcode problems
tags:
  - 
---
![](https://raw.githubusercontent.com/emmableu/image/master/202209151555585.png)

![](https://raw.githubusercontent.com/emmableu/image/master/202209151555668.png)

## Solution

下面是把路径全都打印出来的写法

```python
class Solution:
    def uniquePathsIII(self, grid) -> int:
        res = []
        num_zeros = sum(int(j == 0) for row in grid  for j in row)
        for r in range(len(grid)):
            for c in range(len(grid[0])):
                if grid[r][c] == 1:
                    self.dfs(r, c, [], grid, res, num_zeros)
        return res

    def dfs(self, r, c, path, grid, res, num_zeros):
        if not self.in_area(r, c, grid):
            return 
        # -1, 1, 0, 2, 999
        if grid[r][c] in [-1, 999]:
            return
        if grid[r][c] == 2:
            if num_zeros == 0:
                path.append((r, c))
                res.append(path.copy())
                path.pop()
            return
        original = grid[r][c]
        grid[r][c] = 999
        num_zeros -= int(original == 0)
        path.append((r, c))
        for x, y in (r - 1, c), (r + 1, c), (r, c - 1), (r, c + 1):
            self.dfs(x, y, path, grid, res, num_zeros)
        grid[r][c] = 0
        num_zeros += int(original == 0)
        path.pop()


    def in_area(self, r, c, grid):
        return 0 <= r < len(grid) and 0 <= c < len(grid[0])


sol = Solution()
res = sol.uniquePathsIII([[1,0,0,0],[0,0,0,0],[0,0,2,-1]])
print(res)
# [[(0, 0), (1, 0), (2, 0), (2, 1), (1, 1), (0, 1), (0, 2), (0, 3), (1, 3), (1, 2), (2, 2)], [(0, 0), (0, 1), (0, 2), (0, 3), (1, 3), (1, 2), (1, 1), (1, 0), (2, 0), (2, 1), (2, 2)]]
```