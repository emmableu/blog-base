---
title: 并查集 Union Find 模版
date: 2021-10-12 00:43:45
permalink: /pages/c23f77/
categories:
  - 基本模版
tags:
  - union find
---
参考：[花花酱union find 的基本代码](https://www.youtube.com/watch?v=VJnUwsE4fWA)

```python
class UnionFindSet:
    def __init__(self, n):
        self.parents = list(range(n)) #初始时，每个元素都是自己的parent
        self.rank = [0] * n #rank 表示每个cluster内部有几个子元素
    
    def find(self, x): #这里做了find和path compression，需要理解并记忆
        if x != self.parents[x]:
            self.parents[x] = self.find(self.parents[x])
        return self.parents[x]

    def union(self, x, y):
        parent_x, parent_y = self.find(x), self.find(y)
        if self.rank[parent_x] < self.rank[parent_y]:
            self.parents[parent_x] = parent_y
        else:
            if self.rank[parent_x] == self.rank[parent_y]:
                self.rank[parent_x] += 1 #rank 表示的是复杂度，如果一个大rank的元素中加入了一个小rank的元素，大rank元素的rank不需要改变。
            self.parents[parent_y] = parent_x


```
### 注意：
union find一定要先说清楚方法，说方法的时候，要描述下面的内容：
- 需要哪些数据/数据结构？
- 最后的时候什么是怎么得到一个个set？
- 中间过程：
    - 把谁和谁做union？
    - 怎么做path compression？ 保证了什么样的优化？
    - 怎么做union by rank? 保证了什么样的优化？ (本题不需要)
        - 什么是rank： rank 表示的是复杂度，如果一个大rank的元素中加入了一个小rank的元素，大rank元素的rank不需要改变。
